<!DOCTYPE html>
<html  lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Log In</title>
        <base href = "./"> 
        <link rel="stylesheet" href="./assets/css/styles.css">
        <!-- Firebase code -->
        <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyA4B8e1CETSVPZY2v9_lmdfDK7pXq8NbOw",
            authDomain: "mememaster-9b27a.firebaseapp.com",
            databaseURL: "https://mememaster-9b27a.firebaseio.com",
            projectId: "mememaster-9b27a",
            storageBucket: "mememaster-9b27a.appspot.com",
            messagingSenderId: "825635617975"
          };
          var defaultApp = firebase.initializeApp(config);
          var db = firebase.firestore();
        </script>
    </head>

    <header class="header">
        <a href="./index.html" class="logo">Meme Generator</a>
        <input class="menu-btn" type="checkbox" id="menu-btn" />
        <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
        <ul class="menu">
            <li><a class="active" href="./login.html">Log In</a></li>
            <li><a href="./signup.html">Sign Up</a></li>
        </ul>
    </header>

    <body>

        <div class="user-form" id="loginform" >
            <div class="container">
                <h1>Log In</h1>
                <label for="uname">Username</label>
                <br>
                <input id='email' type="text" placeholder="Enter Username" name="uname" required>
                <br>
                <label for="psw">Password</label>
                <br>
                <input id='password' type="password" placeholder="Enter Password" name="psw" required>
                <br>
                <a href="./index.html"><button type="button" id='cancel' class="cancelbtn">Cancel</button></a>
                <button class="loginbtn" type="submit" onclick="login()">Log In</button>
            </div>

            <div class="container">

                <span class="register">Don't have an acccount yet? <a href="./signup.html"><u>Sign Up here</u></a></span>
                <br>
            </div>
        </div>

        <script>
            function login() {
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;

                firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                  // Handle Errors here.
                  var errorCode = error.code;
                  var errorMessage = error.message;
                  // ...
                });

                firebase.auth().onAuthStateChanged(function(user) {
                  if (user) {
                    console.log("signed in");
                    // ...
                  } else {
                    // User is signed out.
                    // ...
                  }
                });
            }

            firebase.auth().onAuthStateChanged(function(user) {
              if (user) {
                console.log("signed in");
                // ...
              } else {
                // User is signed out.
                // ...
              }
            });
        </script>
    </body>
</html>
