<!DOCTYPE html>
<html  lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sign Up</title>
        <base href = "./"> 
        <link rel="stylesheet" href="./assets/css/styles.css">
        <link>

        <!-- Firebase code -->
        <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyA4B8e1CETSVPZY2v9_lmdfDK7pXq8NbOw",
            authDomain: "mememaster-9b27a.firebaseapp.com",
            databaseURL: "https://mememaster-9b27a.firebaseio.com",
            projectId: "mememaster-9b27a",
            storageBucket: "mememaster-9b27a.appspot.com",
            messagingSenderId: "825635617975"
          };
          var defaultApp = firebase.initializeApp(config);
          var db = firebase.firestore();
        </script>
    </head>
    <header class="header">
        <a href="./index.html" class="logo">Meme Generator</a>
        <input class="menu-btn" type="checkbox" id="menu-btn" />
        <label class="menu-icon" for="menu-btn"><span class="navicon"></span></label>
        <ul class="menu">
            <li><a href="./login.html">Log In</a></li>
            <li><a  class="active" href="./signup.html">Sign Up</a></li>
        </ul>
    </header>
    <body>
        <div class="user-form" id="singupform">
            <div class="container">
                <h1>Sign Up</h1>
                <label for="uname">Username</label>
                <br>
                <input id='email' type="text" placeholder="Enter Username" name="uname" required>
                <br>
                <label for="psw">Password</label>
                <br>
                <input id="password" type="password" placeholder="Enter Password" name="psw" required>
                <label for="psw">Confirm Password</label>
                <br>
                <input id="confirm_password" type="password" placeholder="Confirm Password" name="cfmpsw" required>
                <br>
                <a href="./index.html"><button type="button" class="cancelbtn">Cancel</button></a>
                <button class="signUpbtn" type="submit" onclick="addUser()">Sign Up</button>
            </div>
        </div>
    </body>
    
    <!-- CONFIRM PASSWORD S-->
    <script>

        function addUser() {
            
            var email = document.getElementById('email').value;
            var password = document.getElementById('password').value;
            var confirm_password = document.getElementById("confirm_password").value;

            if(password != confirm_password) {
                alert("Passwords Don't Match");
                return;
            } 
            
        
            firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
                var errorCode = error.code;
                var errorMessage = error.message;
                if (errorCode == 'auth/weak-password') {
                  alert('The password is too weak.');
                } else {
                  alert(errorMessage);
                }
                console.log(error);

            });

            firebase.auth().onAuthStateChanged(user => {
              if(user) {
                window.location = './library.html'; //After successful login, user will be redirected to home.html
              }
            });
        }


    </script>

</html>
